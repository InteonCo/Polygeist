// RUN: mlir-clang++ %s | FileCheck %s

#include <iostream>

class Vec {
    public:
    double data[2];
    Vec() {
        data[0] = 0;
        data[1] = 0;
    }
    Vec(double x, double y) {
        data[0] = x;
        data[1] = y;
    }
    Vec operator+(Vec z) {
        return Vec(data[0]+z.data[0], data[1]+z.data[1]);
    }
};

int main() {
    Vec a;
    Vec b(2, 4);
    Vec c = a + b;
    std::cout << "x: " << c.data[0] << " y: " << c.data[1] << "\n";
}

// CHECK:   func @main() -> i32 {
// CHECK-NEXT:     %c2_i32 = constant 2 : i32
// CHECK-NEXT:     %c4_i32 = constant 4 : i32
// CHECK-NEXT:     %c0_i64 = constant 0 : i64
// CHECK-NEXT:     %c0_i32 = constant 0 : i32
// CHECK-NEXT:     %0 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %1 = memref.cast %0 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     call @_ZN3VecC1Ev(%1) : (memref<?x2xf64>) -> ()
// CHECK-NEXT:     %2 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %3 = memref.cast %2 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     %4 = sitofp %c2_i32 : i32 to f64
// CHECK-NEXT:     %5 = sitofp %c4_i32 : i32 to f64
// CHECK-NEXT:     call @_ZN3VecC1Edd(%3, %4, %5) : (memref<?x2xf64>, f64, f64) -> ()
// CHECK-NEXT:     %6 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %7 = memref.cast %6 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     %8 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %9 = memref.cast %8 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     call @_ZN3VecC1ERKS_(%9, %3) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
// CHECK-NEXT:     %10 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %11 = affine.load %8[0, 0] : memref<1x2xf64>
// CHECK-NEXT:     affine.store %11, %10[0, 0] : memref<1x2xf64>
// CHECK-NEXT:     %12 = affine.load %8[0, 1] : memref<1x2xf64>
// CHECK-NEXT:     affine.store %12, %10[0, 1] : memref<1x2xf64>
// CHECK-NEXT:     %13 = memref.cast %10 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     %14 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %15 = memref.cast %14 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     call @_ZN3VecplES_(%1, %13, %15) : (memref<?x2xf64>, memref<?x2xf64>, memref<?x2xf64>) -> ()
// CHECK-NEXT:     call @_ZN3VecC1EOS_(%7, %15) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
// CHECK-NEXT:     %16 = affine.load %6[0, 0] : memref<1x2xf64>
// CHECK-NEXT:     %17 = affine.load %6[0, 1] : memref<1x2xf64>
// CHECK-NEXT:     %18 = llvm.mlir.addressof @_ZSt4cout : !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
// CHECK-NEXT:     %19 = llvm.mlir.addressof @str0 : !llvm.ptr<array<4 x i8>>
// CHECK-NEXT:     %20 = llvm.getelementptr %19[%c0_i64, %c0_i64] : (!llvm.ptr<array<4 x i8>>, i64, i64) -> !llvm.ptr<i8>
// CHECK-NEXT:     %21 = llvm.call @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%18, %20) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, !llvm.ptr<i8>) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
// CHECK-NEXT:     %22 = llvm.call @_ZNSolsEd(%21, %16) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, f64) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
// CHECK-NEXT:     %23 = llvm.mlir.addressof @str1 : !llvm.ptr<array<5 x i8>>
// CHECK-NEXT:     %24 = llvm.getelementptr %23[%c0_i64, %c0_i64] : (!llvm.ptr<array<5 x i8>>, i64, i64) -> !llvm.ptr<i8>
// CHECK-NEXT:     %25 = llvm.call @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%22, %24) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, !llvm.ptr<i8>) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
// CHECK-NEXT:     %26 = llvm.call @_ZNSolsEd(%25, %17) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, f64) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
// CHECK-NEXT:     %27 = llvm.mlir.addressof @str2 : !llvm.ptr<array<2 x i8>>
// CHECK-NEXT:     %28 = llvm.getelementptr %27[%c0_i64, %c0_i64] : (!llvm.ptr<array<2 x i8>>, i64, i64) -> !llvm.ptr<i8>
// CHECK-NEXT:     %29 = llvm.call @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%26, %28) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, !llvm.ptr<i8>) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
// CHECK-NEXT:     return %c0_i32 : i32
// CHECK-NEXT:   }
// CHECK:   func @_ZN3VecC1Ev(%arg0: memref<?x2xf64>) {
// CHECK-NEXT:     %c0_i32 = constant 0 : i32
// CHECK-NEXT:     %0 = sitofp %c0_i32 : i32 to f64
// CHECK-NEXT:     affine.store %0, %arg0[0, 0] : memref<?x2xf64>
// CHECK-NEXT:     affine.store %0, %arg0[0, 1] : memref<?x2xf64>
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK:   func @_ZN3VecC1Edd(%arg0: memref<?x2xf64>, %arg1: f64, %arg2: f64) {
// CHECK-NEXT:     affine.store %arg1, %arg0[0, 0] : memref<?x2xf64>
// CHECK-NEXT:     affine.store %arg2, %arg0[0, 1] : memref<?x2xf64>
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK:   func @_ZN3VecplES_(%arg0: memref<?x2xf64>, %arg1: memref<?x2xf64>, %arg2: memref<?x2xf64>) {
// CHECK-NEXT:     %0 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %1 = memref.cast %0 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     %2 = memref.alloca() : memref<1x2xf64>
// CHECK-NEXT:     %3 = memref.cast %2 : memref<1x2xf64> to memref<?x2xf64>
// CHECK-NEXT:     %4 = affine.load %arg0[0, 0] : memref<?x2xf64>
// CHECK-NEXT:     %5 = affine.load %arg1[0, 0] : memref<?x2xf64>
// CHECK-NEXT:     %6 = addf %4, %5 : f64
// CHECK-NEXT:     %7 = affine.load %arg0[0, 1] : memref<?x2xf64>
// CHECK-NEXT:     %8 = affine.load %arg1[0, 1] : memref<?x2xf64>
// CHECK-NEXT:     %9 = addf %7, %8 : f64
// CHECK-NEXT:     call @_ZN3VecC1Edd(%3, %6, %9) : (memref<?x2xf64>, f64, f64) -> ()
// CHECK-NEXT:     call @_ZN3VecC1EOS_(%1, %3) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
// CHECK-NEXT:     %10 = affine.load %0[0, 0] : memref<1x2xf64>
// CHECK-NEXT:     affine.store %10, %arg2[0, 0] : memref<?x2xf64>
// CHECK-NEXT:     %11 = affine.load %0[0, 1] : memref<1x2xf64>
// CHECK-NEXT:     affine.store %11, %arg2[0, 1] : memref<?x2xf64>
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK:   func @_ZN3VecC1ERKS_(%arg0: memref<?x2xf64>, %arg1: memref<?x2xf64>) {
// CHECK-NEXT:     affine.for %arg2 = 0 to 2 {
// CHECK-NEXT:       %0 = affine.load %arg1[0, %arg2] : memref<?x2xf64>
// CHECK-NEXT:       affine.store %0, %arg0[0, %arg2] : memref<?x2xf64>
// CHECK-NEXT:     }
// CHECK-NEXT:     return
// CHECK-NEXT:   }
// CHECK:   func @_ZN3VecC1EOS_(%arg0: memref<?x2xf64>, %arg1: memref<?x2xf64>) {
// CHECK-NEXT:     affine.for %arg2 = 0 to 2 {
// CHECK-NEXT:       %0 = affine.load %arg1[0, %arg2] : memref<?x2xf64>
// CHECK-NEXT:       affine.store %0, %arg0[0, %arg2] : memref<?x2xf64>
// CHECK-NEXT:     }
// CHECK-NEXT:     return
// CHECK-NEXT:   }
