// RUN: mlir-clang++ %s | FileCheck %s

#include <iostream>

class Vec {
    public:
double x, y;
    Vec() : x(), y() {}
    Vec(int q) {}
    Vec(double x, double y) : x(x), y(y) {

    }
    Vec operator+(Vec z) {
        return Vec(x+z.x, y+z.y);
    }
};

int main() {
    Vec a;
    Vec b(2, 4);
    Vec d(4);
    Vec c = a + b + d;
    std::cout << "x: " << c.x << " y: " << c.y << "\n";
}

//CHECK:  func @main() -> i32 {
//CHECK-NEXT:    %c2_i32 = constant 2 : i32
//CHECK-NEXT:    %c4_i32 = constant 4 : i32
//CHECK-NEXT:    %c0_i64 = constant 0 : i64
//CHECK-NEXT:    %c0_i32 = constant 0 : i32
//CHECK-NEXT:    %0 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %1 = memref.cast %0 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    call @_ZN3VecC1Ev(%1) : (memref<?x2xf64>) -> ()
//CHECK-NEXT:    %2 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %3 = memref.cast %2 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    %4 = sitofp %c2_i32 : i32 to f64
//CHECK-NEXT:    %5 = sitofp %c4_i32 : i32 to f64
//CHECK-NEXT:    call @_ZN3VecC1Edd(%3, %4, %5) : (memref<?x2xf64>, f64, f64) -> ()
//CHECK-NEXT:    %6 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %7 = memref.cast %6 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    call @_ZN3VecC1Ei(%7, %c4_i32) : (memref<?x2xf64>, i32) -> ()
//CHECK-NEXT:    %8 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %9 = memref.cast %8 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    %10 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %11 = memref.cast %10 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    call @_ZN3VecC1ERKS_(%11, %3) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
//CHECK-NEXT:    %12 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %13 = affine.load %10[0, 0] : memref<1x2xf64>
//CHECK-NEXT:    affine.store %13, %12[0, 0] : memref<1x2xf64>
//CHECK-NEXT:    %14 = affine.load %10[0, 1] : memref<1x2xf64>
//CHECK-NEXT:    affine.store %14, %12[0, 1] : memref<1x2xf64>
//CHECK-NEXT:    %15 = memref.cast %12 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    %16 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %17 = memref.cast %16 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    call @_ZN3VecplES_(%1, %15, %17) : (memref<?x2xf64>, memref<?x2xf64>, memref<?x2xf64>) -> ()
//CHECK-NEXT:    %18 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %19 = memref.cast %18 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    call @_ZN3VecC1ERKS_(%19, %7) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
//CHECK-NEXT:    %20 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %21 = affine.load %18[0, 0] : memref<1x2xf64>
//CHECK-NEXT:    affine.store %21, %20[0, 0] : memref<1x2xf64>
//CHECK-NEXT:    %22 = affine.load %18[0, 1] : memref<1x2xf64>
//CHECK-NEXT:    affine.store %22, %20[0, 1] : memref<1x2xf64>
//CHECK-NEXT:    %23 = memref.cast %20 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    %24 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %25 = memref.cast %24 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    call @_ZN3VecplES_(%17, %23, %25) : (memref<?x2xf64>, memref<?x2xf64>, memref<?x2xf64>) -> ()
//CHECK-NEXT:    call @_ZN3VecC1EOS_(%9, %25) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
//CHECK-NEXT:    %[[i30:.+]] = affine.load %8[0, 0] : memref<1x2xf64>
//CHECK-NEXT:    %[[i31:.+]] = affine.load %8[0, 1] : memref<1x2xf64>
//CHECK-NEXT:    %[[i32:.+]] = llvm.mlir.addressof @_ZSt4cout : !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
//CHECK-NEXT:    %[[i33:.+]] = llvm.mlir.addressof @str0 : !llvm.ptr<array<4 x i8>>
//CHECK-NEXT:    %[[i34:.+]] = llvm.getelementptr %[[i33]][%c0_i64, %c0_i64] : (!llvm.ptr<array<4 x i8>>, i64, i64) -> !llvm.ptr<i8>
//CHECK-NEXT:    %[[i35:.+]] = llvm.call @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%[[i32]], %[[i34]]) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, !llvm.ptr<i8>) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
//CHECK-NEXT:    %[[i36:.+]] = llvm.call @_ZNSolsEd(%[[i35]], %[[i30]]) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, f64) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
//CHECK-NEXT:    %[[i37:.+]] = llvm.mlir.addressof @str1 : !llvm.ptr<array<5 x i8>>
//CHECK-NEXT:    %[[i38:.+]] = llvm.getelementptr %[[i37]][%c0_i64, %c0_i64] : (!llvm.ptr<array<5 x i8>>, i64, i64) -> !llvm.ptr<i8>
//CHECK-NEXT:    %[[i39:.+]] = llvm.call @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%[[i36]], %[[i38]]) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, !llvm.ptr<i8>) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
//CHECK-NEXT:    %[[i40:.+]] = llvm.call @_ZNSolsEd(%[[i39]], %[[i31]]) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, f64) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
//CHECK-NEXT:    %[[i41:.+]] = llvm.mlir.addressof @str2 : !llvm.ptr<array<2 x i8>>
//CHECK-NEXT:    %[[i42:.+]] = llvm.getelementptr %[[i41]][%c0_i64, %c0_i64] : (!llvm.ptr<array<2 x i8>>, i64, i64) -> !llvm.ptr<i8>
//CHECK-NEXT:    %[[i43:.+]] = llvm.call @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%[[i40]], %[[i42]]) : (!llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>, !llvm.ptr<i8>) -> !llvm.ptr<struct<"class.std::basic_ostream", (ptr<ptr<func<i32 (...)>>>, struct<"class.std::basic_ios", (struct<"class.std::ios_base", (ptr<ptr<func<i32 (...)>>>, i64, i64, i32, i32, i32, ptr<struct<"struct.std::ios_base::_Callback_list", (ptr<struct<"struct.std::ios_base::_Callback_list">>, ptr<func<void (i32, ptr<struct<"class.std::ios_base">>, i32)>>, i32, i32)>>, struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>, array<8 x struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, i32, ptr<struct<"struct.std::ios_base::_Words", (ptr<i8>, i64)>>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>, ptr<struct<"class.std::basic_ostream">>, i8, i8, ptr<struct<"class.std::basic_streambuf", (ptr<ptr<func<i32 (...)>>>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, ptr<i8>, struct<"class.std::locale", (ptr<struct<"class.std::locale::_Impl", (i32, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, i64, ptr<ptr<struct<"class.std::locale::facet", packed (ptr<ptr<func<i32 (...)>>>, i32, array<4 x i8>)>>>, ptr<ptr<i8>>)>>)>)>>, ptr<struct<"class.std::ctype", packed (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>, ptr<struct<"struct.__locale_struct", (array<13 x ptr<struct<"struct.__locale_data", opaque>>>, ptr<i16>, ptr<i32>, ptr<i32>, array<13 x ptr<i8>>)>>, i8, array<7 x i8>, ptr<i32>, ptr<i32>, ptr<i16>, i8, array<256 x i8>, array<256 x i8>, i8, array<6 x i8>)>>, ptr<struct<"class.std::num_put", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>, ptr<struct<"class.std::num_get", (struct<"class.std::locale::facet.base", packed (ptr<ptr<func<i32 (...)>>>, i32)>, array<4 x i8>)>>)>)>>
//CHECK-NEXT:    return %c0_i32 : i32
//CHECK-NEXT:  }
//CHECK-NEXT:  func @_ZN3VecC1Ev(%arg0: memref<?x2xf64>) {
//CHECK-NEXT:    %cst = constant 0.000000e+00 : f64
//CHECK-NEXT:    affine.store %cst, %arg0[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    affine.store %cst, %arg0[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    return
//CHECK-NEXT:  }
//CHECK-NEXT:  func @_ZN3VecC1Edd(%arg0: memref<?x2xf64>, %arg1: f64, %arg2: f64) {
//CHECK-NEXT:    affine.store %arg1, %arg0[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    affine.store %arg2, %arg0[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    return
//CHECK-NEXT:  }
//CHECK-NEXT:  func @_ZN3VecC1Ei(%arg0: memref<?x2xf64>, %arg1: i32) {
//CHECK-NEXT:    return
//CHECK-NEXT:  }
//CHECK-NEXT:  func @_ZN3VecplES_(%arg0: memref<?x2xf64>, %arg1: memref<?x2xf64>, %arg2: memref<?x2xf64>) {
//CHECK-NEXT:    %0 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %1 = memref.cast %0 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    %2 = memref.alloca() : memref<1x2xf64>
//CHECK-NEXT:    %3 = memref.cast %2 : memref<1x2xf64> to memref<?x2xf64>
//CHECK-NEXT:    %4 = affine.load %arg0[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    %5 = affine.load %arg1[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    %6 = addf %4, %5 : f64
//CHECK-NEXT:    %7 = affine.load %arg0[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    %8 = affine.load %arg1[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    %9 = addf %7, %8 : f64
//CHECK-NEXT:    call @_ZN3VecC1Edd(%3, %6, %9) : (memref<?x2xf64>, f64, f64) -> ()
//CHECK-NEXT:    call @_ZN3VecC1EOS_(%1, %3) : (memref<?x2xf64>, memref<?x2xf64>) -> ()
//CHECK-NEXT:    %[[i14:.+]] = affine.load %0[0, 0] : memref<1x2xf64>
//CHECK-NEXT:    affine.store %[[i14]], %arg2[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    %[[i15:.+]] = affine.load %0[0, 1] : memref<1x2xf64>
//CHECK-NEXT:    affine.store %[[i15]], %arg2[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    return
//CHECK-NEXT:  }
//CHECK-NEXT:  func @_ZN3VecC1ERKS_(%arg0: memref<?x2xf64>, %arg1: memref<?x2xf64>) {
//CHECK-NEXT:    %0 = affine.load %arg1[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    affine.store %0, %arg0[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    %1 = affine.load %arg1[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    affine.store %1, %arg0[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    return
//CHECK-NEXT:  }
//CHECK-NEXT:  func @_ZN3VecC1EOS_(%arg0: memref<?x2xf64>, %arg1: memref<?x2xf64>) {
//CHECK-NEXT:    %0 = affine.load %arg1[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    affine.store %0, %arg0[0, 0] : memref<?x2xf64>
//CHECK-NEXT:    %1 = affine.load %arg1[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    affine.store %1, %arg0[0, 1] : memref<?x2xf64>
//CHECK-NEXT:    return
//CHECK-NEXT:  }
